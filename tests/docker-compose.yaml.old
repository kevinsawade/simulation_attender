version: '2'
services:
    fix:
        build: dockerfiles/fix_nvidia_gpg_key
        image: kevinsawade/fix_nvidia_gpg_key

    web:
        build:
          dockerfile: dockerfiles/running_rabbit_hello_world/Dockerfile
          context: .
        image: kevinsawade/running_rabbit_hello_world
        ports:
            - "127.0.0.1:8000:8000"
            - "127.0.0.1:801:80"
            - "127.0.0.1:4431:443"
            - "127.0.0.1:8181:8181"
        volumes:
            - .:/app
        user: 'jovyan'
        environment:
          - RUN_QUICKSTART=False
        hostname: server.local.dev
        networks:
          - rr_local
        tty: true
        depends_on:
          - fix

#    gromacs1:
#      build:
#        dockerfile: dockerfiles/from_gromacs_with_openssh/Dockerfile
#        context: .
#      image: kevinsawade/from_gromacs_with_openssh
#      hostname: gromacs1.local.dev
#      networks:
#        - rr_local
#      depends_on:
#        - web
#
#    gromacs2:
#      build:
#        dockerfile: dockerfiles/from_gromacs_with_openssh/Dockerfile
#        context: .
#      image: kevinsawade/from_gromacs_with_openssh
#      hostname: gromacs2.local.dev
#      networks:
#        - rr_local
#      depends_on:
#        - web


networks:
  rr_local:
